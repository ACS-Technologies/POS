@model POCO.Main
@{
    Layout = null;
}
<html>
<head>
    @{
        string assets = "/Content/themes/default/assets/";
        string lang = "ltr";
        //Start Settings Table
        string theme_style = "purple-light";
        string selected_language = "en";
        int default_customer = 1;
        string header = "";
        int remote_printing = 1;
        string dateformat = "D j M Y";
        int default_category = 1;
        int stripe = 0;
        string timeformat = "h:i A";
        int pro_limit = 10;
        //End Settings Table
        //Start Stores Table

        string store_phone = "012345678";
        string store_address1 = "Address Line 1";
        string store_address2 = "";
        string store_city = "Petaling Jaya";

        //End Stores Table
        //Start Printers Table

        int printer_char_per_line = 45;

        //End Printers Table
    }



    <meta charset="UTF-8">
    <title>POS</title>
    <link rel="shortcut icon" href="@(assets)images/icon.png" />

    <link href="@(assets)dist/css/styles.css" rel="stylesheet" type="text/css" />
    @if (lang == "rtl")
    {
        <link href="@(assets)dist/css/rtl.css" rel="stylesheet" />
    }
    <link rel="stylesheet" href="//code.jquery.com/ui/1.13.0/themes/base/jquery-ui.css">
    <link href="~/Content/themes/default/assets/plugins/datatables/datatables.min.css" rel="stylesheet" />
    <script src="@(assets)plugins/jQuery/jQuery-2.1.4.min.js"></script>
    @*<script src="https://code.jquery.com/jquery-3.6.0.js"></script>*@
    <script src="https://code.jquery.com/ui/1.13.0/jquery-ui.js"></script>

    <style>
        input.form-control {
            border-radius: 7px !important
        }

        .list-table .success {
            background-color: #b19dce !important;
            color: #fff
        }

            .list-table .success th {
                background-color: #987bc3 !important
            }

        .select2-container--default .select2-selection--single {
            border-radius: 7px !important
        }

        .pos .contents {
            padding: 15px !important
        }

        .text-white {
            color: #fff !important
        }

        .pos .contents {
            background-color: #fff !important
        }

        .nav-tabs-buttons {
            width: 75%;
            margin: auto;
            background-color: #605ca8;
            border-radius: 15px;
            margin-bottom: 2rem;
            overflow: hidden
        }

            .nav-tabs-buttons li {
                border-right: 1px solid rgba(0, 0, 0, 0.1);
                border-left: 1px solid rgba(0, 0, 0, 0.1);
            }

        .nav > li > a:active, .nav > li > a:focus, .nav > li > a:hover, .nav-tabs.nav-justified > li > a:hover {
            background-color: #4e499d !important;
            color: #fff !important
        }

        .nav-pills > li.active > a, .nav-pills > li.active > a:focus, .nav-pills > li.active > a:hover {
            background-color: #4e499d
        }

            .nav-pills > li.active > a, .nav-pills > li.active > a:focus, .nav-pills > li.active > a:hover {
                border-top-color: #4e499d;
            }

        .real-tabs li a:hover {
            background-color: #eee !important;
            color: #4e499d !important
        }

        #item-list .slimScrollDiv {
            height: 690px !important
        }
    </style>
    <script type="text/javascript">
        $(document).ready(function () {

            function status(x) {
                var paid = 'paid';
                var partial = 'partial';
                var due = 'due';
                if (x == 'paid') {
                    return '<div class="text-center"><span class="sale_status label label-success">' + paid + '</span></div>';
                } else if (x == 'partial') {
                    return '<div class="text-center"><span class="sale_status label label-primary">' + partial + '</span></div>';
                } else if (x == 'due') {
                    return '<div class="text-center"><span class="sale_status label label-danger">' + due + '</span></div>';
                } else {
                    return '<div class="text-center"><span class="sale_status label label-default">' + x + '</span></div>';
                }
            }

            var table = $('#SLData').DataTable({
                "buttons": [
                    { extend: 'copyHtml5', 'footer': true, exportOptions: { columns: [0, 1, 2, 3, 4, 5, 6, 7, 8] } },
                    { extend: 'excelHtml5', 'footer': true, exportOptions: { columns: [0, 1, 2, 3, 4, 5, 6, 7, 8] } },
                    { extend: 'csvHtml5', 'footer': true, exportOptions: { columns: [0, 1, 2, 3, 4, 5, 6, 7, 8] } },
                    {
                        extend: 'pdfHtml5', orientation: 'landscape', pageSize: 'A4', 'footer': true,
                        exportOptions: { columns: [0, 1, 2, 3, 4, 5, 6, 7, 8] }
                    },
                    { extend: 'colvis', text: 'Columns' },
                ]


            });

            $('#search_table').on('keyup change', function (e) {
                var code = (e.keyCode ? e.keyCode : e.which);
                if (((code == 13 && table.search() !== this.value) || (table.search() !== '' && this.value === ''))) {
                    table.search(this.value).draw();
                }
            });

            table.columns().every(function () {
                var self = this;
                $('input.datepicker', this.footer()).on('dp.change', function (e) {
                    self.search(this.value).draw();
                });
                $('input:not(.datepicker)', this.footer()).on('keyup change', function (e) {
                    var code = (e.keyCode ? e.keyCode : e.which);
                    if (((code == 13 && self.search() !== this.value) || (self.search() !== '' && this.value === ''))) {
                        self.search(this.value).draw();
                    }
                });
                $('select', this.footer()).on('change', function (e) {
                    self.search(this.value).draw();
                });
            });

        });
    </script>
</head>
<body class="skin-@theme_style sidebar-collapse sidebar-mini pos" style="background-color:#fff !important">
    <header class="main-header">
        <a href="@Url.Action("Index","Home")" class="logo">
            <span class="logo-mini">POS</span>
        </a>
        <nav class="navbar navbar-static-top" role="navigation">
            <ul class="nav navbar-nav pull-left">
                <li class="dropdown">
                    <a href="@Url.Action("Index","Home")" class="dropdown-toggle" data-toggle="dropdown"><img src="@(assets)images/@(selected_language).png" alt="@selected_language"></a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="@Url.Action("SetLanguage","Language")?lang=en">
                                <img src="@assets/images/en.png" class="language-img">
                                English
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
            <div class="navbar-custom-menu">
                <ul class="nav navbar-nav">
                    <li><a href="#" class="clock"></a></li>
                    <li><a href="@Url.Action("TablePage","POS")"><i class="fa fa-table"></i></a></li>
                    <li><a href="@Url.Action("Index","POS")"><i class="fa fa-th"></i></a></li>
                    <li><a href="#" data-toggle="modal" data-target="#settingsModal"><i class="fa fa-cogs"></i></a></li>
                    <li><a href="@Url.Action("ViewBill","POS")" target="_blank"><i class="fa fa-desktop"></i></a></li>
                    <li class="hidden-xs hidden-sm"><a href="@Url.Action("shortcuts","POS")" data-toggle="ajax"><i class="fa fa-key"></i></a></li>
                    <li><a href="@Url.Action("today_sale","POS")" data-toggle="modal" data-target="#todaySalesModal">@Resources.Default.today_sale</a></li>
                    <li><a href="#" data-toggle="modal" data-target="#closeRegisterModal">@Resources.Default.close_register</a></li>
                    <li class="dropdown notifications-menu" id="suspended_sales">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <i class="fa fa-bell-o"></i>
                            <span class="label label-warning">@Model.SuspendedSale.Count</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="header">
                                <input type="text" autocomplete="off" data-list=".list-suspended-sales" name="filter-suspended-sales" id="filter-suspended-sales" class="form-control input-sm kb-text clearfix" placeholder="@Resources.Default.filter_by_reference">
                            </li>
                            <li>
                                <ul class="menu">
                                    <li class="list-suspended-sales">
                                        @foreach (var item in Model.SuspendedSale)
                                        {
                                            <a href="#" value="@item.Id" class="load_hold">@item.Date.ToString("dd-MM-yyyy")   @item.Customer_name<br><div class="bold">@item.Hold_ref</div></a>
                                        }
                                    </li>
                                </ul>
                            </li>
                            @*<li class="footer"><a href="@Url.Action("opened","sales")">@Resources.Default.view_all</a></li>*@
                        </ul>
                    </li>
                    <li class="dropdown user user-menu">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                            <img src="~/Content/Avatar/@Session["Avatar"]" class="user-image" alt="Avatar" />
                            <span>@Session["first_name"] &nbsp;@Session["last_name"]</span>
                        </a>
                        <ul class="dropdown-menu">
                            <li class="user-header">
                                <img src="~/Content/Avatar/@Session["Avatar"]" class="img-circle" alt="Avatar" />
                                <p>
                                    <?= $this->session->userdata('email'); ?>
                                    <small><?= lang('member_since') . ' ' . $this->session->userdata('created_on'); ?></small>
                                </p>
                            </li>
                            <li class="user-footer">
                                <div class="pull-left">
                                    <a href="<?= site_url('users/profile/' . $this->session->userdata('user_id')); ?>" class="btn btn-default btn-flat"><?= lang('profile'); ?></a>
                                </div>
                                <div class="pull-right">
                                    <a href="<?= site_url('logout'); ?>" class="btn btn-default btn-flat<?= $this->session->userdata('register_id') ? ' sign_out' : ''; ?>"><?= lang('sign_out'); ?></a>
                                </div>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </nav>
    </header>
    <section class="content">
        <h3>Invoices Table</h3>
        <div class="row">
            <div class="col-xs-12">
                <div class="box box-success">
                    <div class="box-body">
                        <div class="table-responsive">
                            <table id="SLData" class="table table-striped table-bordered table-condensed table-hover text-center">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Customer</th>
                                        <th>Total</th>
                                        <th>Tax</th>
                                        <th>Discount</th>
                                        <th>Grand Total</th>
                                        <th>Paid</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @foreach (var item in Model.Sales)
                                    {
                                        <tr role="row" class="odd" id="13">
                                            <td>@item.Date</td>
                                            <td>@item.Customer_name</td>
                                            <td>@item.Total</td>
                                            <td>
                                                @item.Product_tax
                                            </td>
                                            <td>
                                                @item.Order_discount
                                            </td>
                                            <td>
                                                @item.Grand_total
                                            </td>
                                            <td>
                                                @item.Paid
                                            </td>

                                            <td>
                                                <a href="@Url.Action("Index", "POS")?Id=@item.Id" class="tip btn btn-primary btn-sm"><i class="fa fa-eye"></i>&nbsp; View</a>
                                                @*<a href="#" class="tip btn btn-warning btn-sm"><i class="fa fa-pencil"></i>&nbsp; Edit</a>
                                                <a href="#" class="tip btn btn-danger btn-sm"><i class="fa fa-trash-o"></i>&nbsp; Delete</a>*@
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                                <tfoot>
                                    <tr>
                                        <th><span class="datepickercon"><input type="text" class="text_filter datepicker" placeholder="Date"></span></th>
                                        <th><input type="text" class="text_filter" placeholder="Customer"></th>
                                        <th>Total</th>
                                        <th>Tax</th>
                                        <th>Discount</th>
                                        <th>Grand Total</th>
                                        <th>Paid</th>
                                        <th>Actions</th>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                        <div class="clearfix"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <script type="text/javascript">
        $(document).ready(function () {
            $(document).on('click', '.sale_status', function () {
                var sale_id = $(this).closest('tr').attr('id');
                var curr_status = $(this).text();
                var status = curr_status.toLowerCase();
                $('#status-id').text('sale id' + sale_id + ' )');
                $('#sale_id').val(sale_id);
                $('#status').val(status);
                $('#status').select2('val', status);
                $('#stModal').modal()
            });
        });
    </script>
    <script src="@(assets)plugins/bootstrap-datetimepicker/js/moment.min.js" type="text/javascript"></script>
    <script src="@(assets)plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js" type="text/javascript"></script>
    <script src="~/Content/themes/default/assets/plugins/datatables/datatables.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('.datepicker').datetimepicker({ format: 'YYYY-MM-DD', showClear: true, showClose: true, useCurrent: false, widgetPositioning: { horizontal: 'auto', vertical: 'bottom' }, widgetParent: $('.dataTable tfoot') });
        });
    </script>
</body>
</html>