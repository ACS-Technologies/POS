@{
    Layout = null;
}
<!DOCTYPE html>
<html>
<head>
    @{
        string assets = "/Content/themes/default/assets/";
        string lang = "ltr";
        //Start Settings Table
        string theme = "default";
        string theme_style = "purple-light";
        string site_name = "SimplePOS";
        string language = "english";
        string selected_language = "en";
        bool multi_store = false;
        int default_customer = 1;
        string header = "";
        int remote_printing = 1;
        string dateformat = "D j M Y";
        int default_category = 1;
        int stripe = 0;
        string timeformat = "h:i A";
        string protocol = "mail";
        string smtp_host = "pop.gmail.com";
        string smtp_user = "noreply@spos.tecdiary.my";
        string smtp_pass = "";
        string version = "4.1.0";
        int smtp_port = 25;
        string smtp_crypto = "";
        string mailpath = "";
        string timezone = "Asia/Kuala_Lumpur";
        int setting_id = 1;
        string logo = "logo1.png";
        string default_email = "aboodcs1995@gmail.com";
        int mmode = 0;
        int captcha = 0;
        string currency_prefix = "JOD";
        string default_tax_rate = "16%";
        int rows_per_page = 10;
        int total_rows = 30;
        string footer = "";
        int bsty = 3;
        int display_kb = 0;
        int default_discount = 0;
        int item_addition = 1;
        string barcode_symbology = "";
        int pro_limit = 10;
        int decimals = 2;
        string thousands_sep = ".";
        string decimals_sep = ".";
        string focus_add_item = "ALT+F1";
        string add_customer = "ALT+F2";
        string toggle_category_slider = "ALT+F10";
        string cancel_sale = "ALT+F5";
        string suspend_sale = "ALT+F6";
        string print_order = "ALT+F11";
        string print_bill = "ALT+F12";
        string finalize_sale = "ALT+F8";
        string today_sale = "Ctrl+F1";
        string open_hold_bills = "Ctrl+F2";
        string close_register = "Ctrl+F7";
        int java_applet = 0;
        string receipt_printers = "";
        string cash_drawer_codes = "";
        int char_per_line = 42;
        int rounding = 1;
        int pin_code = 2122;
        string stripe_secret_key = "";
        string stripe_publishable_key = "";
        string purchase_code = "416de128-7cac-4ac5-a362-b980c82decff";
        string envato_username = "ACS-Techs";
        int after_sale_page = 0;
        int overselling = 1;
        int qty_decimals = 2;
        string symbol = "";
        int sac = 0;
        int display_symbol = 0;
        int remote_primting = 1;
        int printer = 1;
        string order_printers = "";
        int auto_print = 0;
        int local_printers = 1;
        int rtl = 0;
        int print_img = 0;
        string ws_barcode_type = "weight";
        int ws_barcode_chars = 13;
        int flag_chars = 1;
        int item_code_start = 2;
        int item_code_chars = 6;
        int price_start = 0;
        int price_chars = 0;
        int price_divide_by = 0;
        int weight_start = 8;
        int weight_chars = 5;
        int weight_divide_by = 100;
        //End Settings Table
        //Start Stores Table
        string store_name = "SimplePOS";
        string store_code = "POS";
        string store_email = "store@tecdiary.com";
        string store_phone = "012345678";
        string store_address1 = "Address Line 1";
        string store_address2 = "";
        string store_city = "Petaling Jaya";
        string store_state = "Selangor";
        int store_postal_code = 46000;
        string store_country = "Jordan";
        string store_currency_code = "JOD";
        string store_receipt_header = "";
        string store_receipt_footer = "This is receipt footer for store";
        //End Stores Table
        //Start Printers Table
        string printer_title = "XPrinter";
        string printer_type = "network";
        string printer_profile = "default";
        int printer_char_per_line = 45;
        string printer_path = "";
        string printer_ip_address = "0x3139322E3136382E312E323030";
        int printer_port = 9100;
        //End Printers Table
    }
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>POS Promotional Page</title>
    <link href="@(assets)bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <style>
        a, a:focus, a:hover {
            color: #000
        }

        .btn-default, .btn-default:focus, .btn-default:hover {
            color: #333;
            text-shadow: none;
            background-color: #fff;
            border: 1px solid #fff
        }

        body, html {
            height: 100%;
            min-height: 560px;
            background: transparent;
        }

        body {
            color: #333;
            text-align: center;
            text-shadow: 0 1px 3px rgba(0,0,0,.05)
        }

        .site-wrapper {
            display: table;
            width: 100%;
            height: 100%;
            min-height: 100%;
            padding-top:30rem
        }

        .site-wrapper-inner {
            display: table-cell;
            vertical-align: top
        }

        .cover-container {
            margin-right: auto;
            margin-left: auto
        }

        .inner {
            padding: 30px
        }

        .masthead-brand {
            margin-top: 10px;
            margin-bottom: 10px
        }

        .masthead-nav > li {
            display: inline-block
        }

            .masthead-nav > li + li {
                margin-left: 20px
            }

            .masthead-nav > li > a {
                padding-right: 0;
                padding-left: 0;
                font-size: 16px;
                font-weight: 700;
                color: #333;
                color: rgba(255,255,255,.75);
                border-bottom: 2px solid transparent
            }

                .masthead-nav > li > a:focus, .masthead-nav > li > a:hover {
                    background-color: transparent;
                    border-bottom-color: #a9a9a9;
                    border-bottom-color: rgba(255,255,255,.25)
                }

        .masthead-nav > .active > a, .masthead-nav > .active > a:focus, .masthead-nav > .active > a:hover {
            color: #333;
            border-bottom-color: #fff
        }

        .cover {
            padding: 0 20px
        }

            .cover .btn-lg {
                padding: 10px 20px;
                font-weight: 700
            }

        .mastfoot {
            color: #ccc;
            color: #333
        }

        @@media (min-width:768px) {
            .masthead {
                position: fixed;
                top: 0
            }

            .mastfoot {
                position: fixed;
                bottom: 0
            }

            .site-wrapper-inner {
                vertical-align: middle
            }

            .cover-container, .mastfoot, .masthead {
                width: 100%
            }
        }

        @@media (min-width:992px) {
            .cover-container, .mastfoot, .masthead {
                width: 700px
            }
        }
               html, body {
            background: #F9F9F9;
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            min-width: 400px;
            color: #333;
        }
        a { outline: none; }
        h2 { margin: 20px 0; }
        .bill {
            min-height: 600px;
            background: #FFF;
            margin: 20px 20px 0 20px;
        }
        .content { display: none; }
        .with-promo-space .wrap {
            margin: 0;
            padding: 0;
            padding-right: 480px;
            overflow: hidden;
        }
        .with-promo-space .main {
            margin: 20px -500px 0 auto;
            width: 100%;
        }
        .with-promo-space .content {
            display: block;
            padding-right: 40px;
        }
        .with-promo-space .bill {
            width: 450px;
            float: left;
            min-height: 600px;
        }
        td { vertical-align: middle !important; }
        #product-list {
            display: block;
            overflow: hidden;
            min-height: 795px;
            border: 1px solid #ddd;
            padding: 20px 20px 0 20px;
        }
        #totals { border-top: 1px solid #ddd; }
        .preview_frame { width: 100%; }
        @@media print {
            .wrap { padding: 0; width: 100%; }
            .main { display: none; margin: 0; }
            .bill { width: 90%; margin-left: auto; margin-right: auto; height: auto !important; }
            .bill, #product-list, #billTable { width: 100%; height: auto !important; min-height: 200px; }
            #billTable td { border-bottom: 1px solid #CCC; }
            #totals td { border: 1px solid #CCC !important; border-color: #CCC !important; }
        }
    </style>
</head>

<body class="with-promo-space">
    <noscript>
        <div class="global-site-notice noscript">
            <div class="notice-inner">
                <p>
                    <strong>JavaScript seems to be disabled in your browser.</strong><br>You must have JavaScript enabled in
                    your browser to utilize the functionality of this website.
                </p>
            </div>
        </div>
    </noscript>

    <div class="wrap">
        <div class="bill" id="bill">
            <div id="product-list">
                <table style="margin-bottom: 0;" id="billTable" class="table table-striped table-condensed">
                    <thead>
                        <tr>
                            <th width="50%" class="text-center">@Resources.Default.Products</th>
                            <th width="15%" class="text-center">@Resources.Default.qty</th>
                            <th width="15%" class="text-center">@Resources.Default.subtotal</th>
                            <th width="20%" class="text-center">VAT</th>
                            <th width="20%" class="text-center">@Resources.Default.total</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <div id="totals">
                <table style="width:100%; float:right; padding:5px; color:#000; background: #FFF;" id="totalTable">
                    <tbody>
                        <tr>
                            <td style="border-left: 1px solid #ddd; padding-left:10px; text-align:left; font-weight:normal;">
                                @Resources.Default.total_items
                            </td>
                            <td style="text-align:right; padding-right:10px; font-weight:bold;"><span id="count">0.00</span></td>
                            <td style="padding-left:10px; text-align:left;">@Resources.Default.total</td>
                            <td style="border-right: 1px solid #ddd; text-align:right; padding-right:10px; font-weight:bold;">
                                <span id="total">0.00</span>
                            </td>
                        </tr>
                        <tr>
                            <td style="border-left: 1px solid #ddd; padding-left:10px; text-align:left; ">@Resources.Default.discount</td>
                            <td style="text-align:right; padding-right:10px; font-weight:bold;">
                                <span id="ds_con">0.00</span>
                            </td>
                            <td style="padding-left:10px; text-align:left; font-weight:normal;">@Resources.Default.order_tax</td>
                            <td style="border-right: 1px solid #ddd; text-align:right; padding-right:10px; font-weight:bold;"><span id="ts_con">0.00</span></td>
                        </tr>
                        <tr>
                            <td colspan="2"
                                style="padding: 5px 0px 5px 10px; text-align:left; font-size: 1.4em; border: 1px solid #333; font-weight:bold; background:#333; color:#FFF;">
                                @Resources.Default.total_payable
                            </td>
                            <td colspan="2"
                                style="text-align:right; padding:5px 10px 5px 0px; font-size: 1.4em; border: 1px solid #333; font-weight:bold; background:#333; color:#FFF;">
                                <span id="total-payable">0.00</span>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="clearfix"></div>
            </div>
        </div>
        <div class="main">
            <div class="content">
                <div class="site-wrapper">

                    <div class="site-wrapper-inner">

                        <div class="cover-container">

                            @*<div class="masthead clearfix">
                                <div class="inner">
                                    <h3 class="text-center"><?= $Settings->site_name; ?></h3>
                                </div>
                            </div>*@

                            <div class="inner cover">
                                <h1 class="cover-heading">Thank you for your visit!!!</h1>
                                <p class="lead">Please come again.</p>
                                <p class="lead">If you are happy with our services, please tell to your friends otherwise let us know so that we can improve.</p>

                                <!-- <small>
                                    <code>
                                        Please change content by editing themes/default/views/promotions.php
                                    </code>
                                </small> -->
                            </div>

                            <div class="mastfoot">
                                <div class="inner">
                                    <!-- <p>Simple POS by <a href="http://tecdiary.com">Tecdiary</a>.</p> -->
                                </div>
                            </div>

                        </div>

                    </div>

                </div>
                <div class="clearfix"></div>
            </div>
        </div>
    </div>


    <script src="@(assets)plugins/jQuery/jQuery-2.1.4.min.js" type="text/javascript"></script>
    <script src="@(assets)bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        var count = 1, an = 1, product_tax = 0, invoice_tax = 0, total_discount = 0, total = 0;
        var Settings = {
            theme: "default",
            theme_style: "purple-light",
            site_name: "SimplePOS",
            language: "english",
            selected_language: "en",
            multi_store: false,
            default_customer: 1,
            header: "",
            remote_printing: 1,
            dateformat: "D j M Y",
            default_category: 1,
            stripe: 0,
            timeformat: "h:i A",
            protocol: "mail",
            smtp_host: "pop.gmail.com",
            smtp_user: "noreply@spos.tecdiary.my",
            smtp_pass: "",
            version: "4.1.0",
            smtp_port: 25,
            smtp_crypto: "",
            mailpath: "",
            timezone: "Asia/Kuala_Lumpur",
            setting_id: 1,
            logo: "logo1.png",
            default_email: "aboodcs1995@gmail.com",
            mmode: 0,
            captcha: 0,
            currency_prefix: "JOD",
            default_tax_rate: "16%",
            rows_per_page: 10,
            total_rows: 30,
            footer: "",
            bsty: 3,
            display_kb: 0,
            default_discount: 0,
            item_addition: 1,
            barcode_symbology: "",
            pro_limit: 10,
            decimals: 2,
            thousands_sep: ".",
            decimals_sep: ".",
            focus_add_item: "ALT+F1",
            add_customer: "ALT+F2",
            toggle_category_slider: "ALT+F10",
            cancel_sale: "ALT+F5",
            suspend_sale: "ALT+F6",
            print_order: "ALT+F11",
            print_bill: "ALT+F12",
            finalize_sale: "ALT+F8",
            today_sale: "Ctrl+F1",
            open_hold_bills: "Ctrl+F2",
            close_register: "Ctrl+F7",
            java_applet: 0,
            receipt_printers: "",
            cash_drawer_codes: "",
            char_per_line: 42,
            rounding: 1,
            pin_code: 2122,
            stripe_secret_key: "",
            stripe_publishable_key: "",
            purchase_code: "416de128-7cac-4ac5-a362-b980c82decff",
            envato_username: "ACS-Techs",
            after_sale_page: 0,
            overselling: 1,
            qty_decimals: 2,
            symbol: "",
            sac: 0,
            display_symbol: 0,
            remote_primting: 1,
            printer: 1,
            order_printers: "",
            auto_pr: 0,
            local_printers: 1,
            rtl: 0,
            print_img: 0,
            ws_barcode_type: "weight",
            ws_barcode_chars: 13,
            flag_chars: 1,
            item_code_start: 2,
            item_code_chars: 6,
            price_start: 0,
            price_chars: 0,
            price_divide_by: 0,
            weight_start: 8,
            weight_chars: 5,
            weight_divide_by: 100
        };
        function widthFunctions(e) {
            var wh = $(window).height(),
                tT = $('#totalTable').outerHeight(true);
            $('#bill').css("height", (wh - 42));
            $('#product-list').css("height", (wh - tT - 42));
            $('.preview_frame').css("height", (wh - 42));
        }
        $(window).bind("resize", widthFunctions);
        $(window).bind("load", widthFunctions);
        $(document).ready(function () {
            loadItems();
            window.setInterval(function () {
                loadItems();
            }, 1000);
        });
        function formatDecimal(x) {
            return parseFloat(parseFloat(x).toFixed(Settings.decimals));
        }
        function loadItems() {
            if (count == 1) {
                spositems = {};
            }
            if (get('spositems')) {
                total = 0;
                count = 1;
                an = 1;
                product_tax = 0;
                invoice_tax = 0;
                product_discount = 0;
                order_discount = 0;
                total_discount = 0;

                $("#billTable tbody").empty();
                spositems = JSON.parse(get('spositems'));

                $.each(spositems, function () {
                    debugger
                    var item = this;
                    var item_id = Settings.item_addition == 1 ? item.Product_id : item.Product_id;
                    spositems[item_id] = item;

                    var product_id = item.Product_id, item_qty = item.Quantity, item_aqty = parseFloat(item.Quantity), item_ds = item.Discount, item_code = item.Product_code, item_name = item.Product_name;
                    var unit_price = parseFloat(item.Real_unit_price);
                    var net_price = unit_price;
                    var ds = item.Discount ? item.Discount : '0';
                    var item_discount = formatDecimal(ds);
                    if (ds.indexOf("%") !== -1) {
                        var pds = ds.split("%");
                        if (!isNaN(pds[0])) {
                            item_discount = formatDecimal(parseFloat(((unit_price) * parseFloat(pds[0])) / 100));
                        }
                    }
                    debugger
                     product_tax += item.Quantity * net_price * (item.Tax / 100);
                    product_discount += formatDecimal(item_discount * item_qty);
                    net_price = formatDecimal(net_price - item_discount, 4);
                    unit_price = formatDecimal(unit_price - item_discount);
                    var item_price = unit_price;
                    var pr_Tax = parseFloat(item.Tax / 100),
                        pr_Tax_val = 0;

                    unit_price = formatDecimal(unit_price + item_discount);

                    var row_no = (new Date).getTime();
                    var newTr = $('<tr></tr>');
                    tr_html = '<td>' + item_name + ' (' + item_code + ')</td>';
                    tr_html += '<td class="text-center">' + formatDecimal(item.Quantity) + '</td>';
                    tr_html += '<td class="text-right">' + formatMoney(parseFloat(item.Unit_price)) + '</td>';
                    tr_html += '<td class="text-center">' +  formatMoney(parseFloat(item.Item_tax))  + '</td>';
                    tr_html += '<td class="text-right">' + formatMoney(((parseFloat(item.Unit_price) + parseFloat(0)) * parseFloat(item.Quantity))) + '</td>';
                    newTr.html(tr_html);
                    newTr.prependTo("#billTable");
                    total += ((parseFloat(item.Unit_price) + parseFloat(0)) * parseFloat(item.Quantity));
                    count += parseFloat(item.Quantity);
                    an++;
                    // $('#list-table-div').scrollTop(0);
                });

                var order_tax = 0;
                var ds = get('spos_discount') ? get('spos_discount') : ($('#discount_val').val() ? $('#discount_val').val() : '0');
                if (ds.indexOf("%") !== -1) {
                    var pds = ds.split("%");
                    order_discount = (total * parseFloat(pds[0])) / 100;
                } else {
                    order_discount = parseFloat(ds);
                }
                $("#ds_con").text('(' + formatMoney(product_discount) + ') ' + formatMoney(order_discount));
                var ts = 0;

                $("#ts_con").text(formatMoney(product_tax));

                var g_total = total - parseFloat(order_discount) + parseFloat(product_tax);
                grand_total = formatMoney(g_total);
                $("#total-payable").text(grand_total);
                $("#total").text(formatMoney(total));
                $("#count").text((an - 1) + ' (' + formatMoney(count - 1) + ')');

                $('#add_item').focus();
            }
        }
        function formatMoney(x, symbol) {
            if (!symbol) {
                symbol = "";
            }
            return accounting.formatMoney(x, symbol, Settings.decimals, Settings.thousands_sep == 0 ? ' ' : Settings.thousands_sep, Settings.decimals_sep, "%s%v");
        }

        function get(name) {
            if (typeof (Storage) !== "undefined") {
                return localStorage.getItem(name);
            } else {
                alert('Please use a modern browser as this site needs localstroage!');
            }
        }

        (function (p, z) {
            function q(a) {
                return !!("" === a || a && a.charCodeAt && a.substr)
            }

            function m(a) {
                return u ? u(a) : "[object Array]" === v.call(a)
            }

            function r(a) {
                return "[object Object]" === v.call(a)
            }

            function s(a, b) {
                var d, a = a || {}, b = b || {};
                for (d in b) b.hasOwnProperty(d) && null == a[d] && (a[d] = b[d]);
                return a
            }

            function j(a, b, d) {
                var c = [], e, h;
                if (!a) return c;
                if (w && a.map === w) return a.map(b, d);
                for (e = 0, h = a.length; e < h; e++)c[e] = b.call(d, a[e], e, a);
                return c
            }

            function n(a, b) {
                a = Math.round(Math.abs(a));
                return isNaN(a) ? b : a
            }

            function x(a) {
                var b = c.settings.currency.format;
                "function" === typeof a && (a = a());
                return q(a) && a.match("%v") ? {
                    pos: a,
                    neg: a.replace("-", "").replace("%v", "-%v"),
                    zero: a
                } : !a || !a.pos || !a.pos.match("%v") ? !q(b) ? b : c.settings.currency.format = {
                    pos: b,
                    neg: b.replace("%v", "-%v"),
                    zero: b
                } : a
            }

            var c = {
                version: "0.4.1",
                settings: {
                    currency: { symbol: "$", format: "%s%v", decimal: ".", thousand: ",", precision: 2, grouping: 3 },
                    number: { precision: 0, grouping: 3, thousand: ",", decimal: "." }
                }
            }, w = Array.prototype.map, u = Array.isArray, v = Object.prototype.toString, o = c.unformat = c.parse = function (a, b) {
                if (m(a)) return j(a, function (a) {
                    return o(a, b)
                });
                a = a || 0;
                if ("number" === typeof a) return a;
                var b = b || ".", c = RegExp("[^0-9-" + b + "]", ["g"]), c = parseFloat(("" + a).replace(/\((.*)\)/, "-$1").replace(c, "").replace(b, "."));
                return !isNaN(c) ? c : 0
            }, y = c.toFixed = function (a, b) {
                var b = n(b, c.settings.number.precision), d = Math.pow(10, b);
                return (Math.round(c.unformat(a) * d) / d).toFixed(b)
            }, t = c.formatNumber = c.format = function (a, b, d, i) {
                if (m(a)) return j(a, function (a) {
                    return t(a, b, d, i)
                });
                var a = o(a), e = s(r(b) ? b : {
                    precision: b,
                    thousand: d,
                    decimal: i
                }, c.settings.number), h = n(e.precision), f = 0 > a ? "-" : "", g = parseInt(y(Math.abs(a || 0), h), 10) + "", l = 3 < g.length ? g.length % 3 : 0;
                return f + (l ? g.substr(0, l) + e.thousand : "") + g.substr(l).replace(/(\d{3})(?=\d)/g, "$1" + e.thousand) + (h ? e.decimal + y(Math.abs(a), h).split(".")[1] : "")
            }, A = c.formatMoney = function (a, b, d, i, e, h) {
                if (m(a)) return j(a, function (a) {
                    return A(a, b, d, i, e, h)
                });
                var a = o(a), f = s(r(b) ? b : {
                    symbol: b,
                    precision: d,
                    thousand: i,
                    decimal: e,
                    format: h
                }, c.settings.currency), g = x(f.format);
                return (0 < a ? g.pos : 0 > a ? g.neg : g.zero).replace("%s", f.symbol).replace("%v", t(Math.abs(a), n(f.precision), f.thousand, f.decimal))
            };
            c.formatColumn = function (a, b, d, i, e, h) {
                if (!a) return [];
                var f = s(r(b) ? b : {
                    symbol: b,
                    precision: d,
                    thousand: i,
                    decimal: e,
                    format: h
                }, c.settings.currency), g = x(f.format), l = g.pos.indexOf("%s") < g.pos.indexOf("%v") ? !0 : !1, k = 0, a = j(a, function (a) {
                    if (m(a)) return c.formatColumn(a, f);
                    a = o(a);
                    a = (0 < a ? g.pos : 0 > a ? g.neg : g.zero).replace("%s", f.symbol).replace("%v", t(Math.abs(a), n(f.precision), f.thousand, f.decimal));
                    if (a.length > k) k = a.length;
                    return a
                });
                return j(a, function (a) {
                    return q(a) && a.length < k ? l ? a.replace(f.symbol, f.symbol + Array(k - a.length + 1).join(" ")) : Array(k - a.length + 1).join(" ") + a : a
                })
            };
            if ("undefined" !== typeof exports) {
                if ("undefined" !== typeof module && module.exports) exports = module.exports = c;
                exports.accounting = c
            } else "function" === typeof define && define.amd ? define([], function () {
                return c
            }) : (c.noConflict = function (a) {
                return function () {
                    p.accounting = a;
                    c.noConflict = z;
                    return c
                }
            }(p.accounting), p.accounting = c)
        })(this);
    </script>
</body>
</html>